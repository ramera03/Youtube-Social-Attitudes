<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Reilly Amera">
<meta name="description" content="YOUTUBE RACIAL ATTITUDES">

<title>YouTube Kids: The Effect of YouTube on Children’s Racial Learning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="manuscript_files/libs/clipboard/clipboard.min.js"></script>
<script src="manuscript_files/libs/quarto-html/quarto.js"></script>
<script src="manuscript_files/libs/quarto-html/popper.min.js"></script>
<script src="manuscript_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="manuscript_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="manuscript_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="manuscript_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="manuscript_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="manuscript_files/libs/bootstrap/bootstrap-61c9f5fe3bf7f1d5f9219c551e9df0c2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="_extensions/wjschne/apaquarto/apa.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#references" id="toc-references" class="nav-link active" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="manuscript.docx"><i class="bi bi-file-word"></i>MS Word (apaquarto)</a></li><li><a href="manuscript.pdf"><i class="bi bi-file-pdf"></i>Typst (apaquarto)</a></li><li><a href="manuscript.pdf"><i class="bi bi-file-pdf"></i>PDF (apaquarto)</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">




<br>

<br>

<section id="title" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">YouTube Kids: The Effect of YouTube on Children’s Racial Learning</h1>
<div class="Author">
<br>

<p>Reilly Amera</p>
<p>MA Program in the Social Sciences, University of Chicago</p>
</div>
</section>
<section id="author-note" class="level1 unnumbered unlisted AuthorNote">
<h1 class="unnumbered unlisted AuthorNote">Author Note</h1>
</section>
<section id="firstheader" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">YouTube Kids: The Effect of YouTube on Children’s Racial Learning</h1>
<section id="introduction" class="level2">
<h2 data-anchor-id="introduction">Introduction</h2>
<p>Is YouTube making kids more racist? Despite sounding like the cultural fear-mongering often associated with screen time and development, such a question refers to real concerns that psychological research has yet to address: what are children really learning from YouTube, particularly with regard to race?</p>
<section id="sec-lit-review" class="level3">
<h3 data-anchor-id="sec-lit-review">Literature Review</h3>
<p>Much of the literature on how children learn about their racial world places great emphasis on the transmission of information that is explicitly about race: how parents talk about members of other racial groups, how and whether schools portray the histories of marginalized groups, how peers may communicate stereotypes, etc. <span class="citation" data-cites="hugheswatford_2022_racial">(<a href="#ref-hugheswatford_2022_racial" role="doc-biblioref">D. L. Hughes &amp; Watford, 2022</a>)</span>. In this view, ethnic-racial socialization, or the ways in which agents transmit messages about ethnicity and race to children, occurs through direct verbal instruction. However, in addition to more explicit transmissions of racial knowledge, children are simultaneously exposed to a barrage of more implicit environmental inputs—who they live near, for instance, or who they see on screens—which may also affect these conceptions <span class="citation" data-cites="hughesetal_2023_growing">(<a href="#ref-hughesetal_2023_growing" role="doc-biblioref">D. Hughes et al., 2023</a>)</span>.</p>
<p>Not only does ethnic-racial socialization occur with explicit instruction, but so too do children attend to the racial patterns and organizations embedded into their environments and social settings <span class="citation" data-cites="hugheswatford_2022_racial">(<a href="#ref-hugheswatford_2022_racial" role="doc-biblioref">D. L. Hughes &amp; Watford, 2022</a>)</span>. Such environmental racial patterns—who tends to hold positions of authority, who tends to receive discipline in school, etc.—constitute racial regularities, or “persistent patterns in the relative social experiences of, or roles occupied by, two or more racial (or racialized groups) within a setting” <span class="citation" data-cites="hugheswatford_2022_racial">(<a href="#ref-hugheswatford_2022_racial" role="doc-biblioref">D. L. Hughes &amp; Watford, 2022</a>)</span>. In response to such patterns, children engage in racial learning, or the meaning-making of external messaging so as to form their own conceptions of how race works in their social world <span class="citation" data-cites="hugheswatford_2022_racial">(<a href="#ref-hugheswatford_2022_racial" role="doc-biblioref">D. L. Hughes &amp; Watford, 2022</a>)</span>. As such, when exposed to consistent, repeated regularities, children draw inferences as to why such patterns exist and persist; they may accept that such patterns as necessary features of ‘the way things are,’ or may even create explanations for such patterns (e.g.&nbsp;“White families live in big houses because they work hard” in contrast to “Black families live in big houses because they got lucky”) <span class="citation" data-cites="hughesetal_2023_growing rizzoetal_2022_beliefs">(<a href="#ref-hughesetal_2023_growing" role="doc-biblioref">D. Hughes et al., 2023</a>; <a href="#ref-rizzoetal_2022_beliefs" role="doc-biblioref">Rizzo et al., 2022</a>)</span>. Further, this learning may be yet more implicit: when tested in the same environment, young children show levels of implicit biases, unconscious mental associations based on race or other social categories, similar to those of adults <span class="citation" data-cites="payneetal_2017_bias">(<a href="#ref-payneetal_2017_bias" role="doc-biblioref">Payne et al., 2017</a>)</span> This suggests that features of specific environments such as racial regularities not only affect explicitly articulated beliefs but implicit understandings of one’s social environment. As such, to fully understand how children’s conceptions of race form, we must examine the ways in which environments containing ontologically inaccurate racial regularities affect their racial learning.</p>
<p>One such environmental stream of input regarding race and racial regularities is social media. Children today have unparalleled access to social media platforms: YouTube, TikTok, Twitch, and more. On these sites, the sheer amount of content posted often outpaces enforcement of content guidelines, making it difficult to know exactly what children are seeing or learning from the content they are consuming. Unlike media such as television or movies, social media platforms are populated by both media corporations and individual content creators. YouTube is a social media platform that is particularly popular amongst children; many children use YouTube regularly: one third of parents of children aged 11 and younger surveyed by Pew Research Center indicated that they let their children use YouTube regularly <span class="citation" data-cites="smithetal_2018_many">(<a href="#ref-smithetal_2018_many" role="doc-biblioref">Smith et al., 2018</a>)</span>. Further, amongst tweens and teens, video logs and gaming videos—types of content usually generated by influencers, not corporations—are the two most popular genres watched <span class="citation" data-cites="rollinsetal_2022_who">(<a href="#ref-rollinsetal_2022_who" role="doc-biblioref">Rollins et al., 2022</a>)</span>.</p>
<p>Despite massive popularity, research on the effects of YouTube and other forms of social media on children’s race-related attitudes and behaviors has not been methodologically systematic <span class="citation" data-cites="wardbridgewater_2023_media">(<a href="#ref-wardbridgewater_2023_media" role="doc-biblioref">Ward &amp; Bridgewater, 2023</a>)</span>. Though YouTube has become a regular part of children’s lives, it is still unknown how YouTube may be affecting children’s conceptions of racial categories and associated beliefs about race. However, some research has emerged describing racial regularities on YouTube: in a review conducted by Common Sense Media, in YouTube videos watched by children under the age of 8, prominent characters of color were far more likely to engage in violent behaviors or inappropriate language, and were less likely to appear alongside educational content <span class="citation" data-cites="rollinsetal_2022_who">(<a href="#ref-rollinsetal_2022_who" role="doc-biblioref">Rollins et al., 2022</a>)</span>. In another content analysis of the most popular YouTube videos at the time, more than three-fifths of videos in the sample included racial stereotypes, most of which reinforced and perpetuated them <span class="citation" data-cites="guoharlow_2014_usergenerated">(<a href="#ref-guoharlow_2014_usergenerated" role="doc-biblioref">Guo &amp; Harlow, 2014</a>)</span>. Taken together, we see that YouTube contains racial regularities in the form of stereotypes, which children may be accommodating into their beliefs, but there has not yet been any research confirming this connection.</p>
<p>While there is a body of research aimed at understanding how certain aspects of children’s environments contribute to the formation of racial attitudes, there is not as much focus on how YouTube, or other social media platforms, function as sites of racial socialization and learning via racial regularities. Similarly, though there have been some content analyses regarding the racial character of YouTube videos, such studies have yet to be done in conjunction with psychological measures of racial beliefs and attitudes. Due to this lack of research into how social media ecologies contribute to kids’ racial beliefs, I thus ask the question: are children for whom stereotypical social media is a part of their daily environment more likely to develop stereotyping or prejudicial racial beliefs and attitudes?</p>
</section>
<section id="sec-present-study" class="level3">
<h3 data-anchor-id="sec-present-study">Present Study</h3>
<p>This study will examine the relationship between YouTube usage and children’s development of racial attitudes, so as to understand whether and the degree to which YouTube may be a site of ethnic-racial socialization where children develop prejudices against those of other races.</p>
<p>I hypothesize that time spent on YouTube and children’s observation of racial regularities should covary; as children spend more time on YouTube, they may observe more negatively valenced racial regularities including people of color <span class="citation" data-cites="guoharlow_2014_usergenerated rollinsetal_2022_who">(<a href="#ref-guoharlow_2014_usergenerated" role="doc-biblioref">Guo &amp; Harlow, 2014</a>; <a href="#ref-rollinsetal_2022_who" role="doc-biblioref">Rollins et al., 2022</a>)</span>. Thus, I hypothesize that if children spend more time on YouTube, they will display greater racial stereotyping and prejudice against outgroups. While some children may not be consciously aware of on-screen racial regularities, these dynamics may still affect their racial attitudes <span class="citation" data-cites="hugheswatford_2022_racial">(<a href="#ref-hugheswatford_2022_racial" role="doc-biblioref">D. L. Hughes &amp; Watford, 2022</a>)</span>. As such, I hypothesize that the relationship between children’s time spent on YouTube and their exhibited racial stereotyping and prejudice will be mediated by their observations of negative racial regularities.</p>
<p>One additional factor that may moderate the relationship between time spent on YouTube and racial attitudes is whether a child’s favorite YouTuber is of a race other than their own, via the parasocial contact hypothesis. This theory suggests that when individuals have limited real life interpersonal contact with minority groups, the formation of parasocial (one-sided) relationships with outgroup media figures may reduce stereotyping and prejudice <span class="citation" data-cites="schiappaetal_2005_parasocial wongetal_2022_theorizing">(<a href="#ref-schiappaetal_2005_parasocial" role="doc-biblioref">Schiappa et al., 2005</a>; <a href="#ref-wongetal_2022_theorizing" role="doc-biblioref">Wong et al., 2022</a>)</span>. Much of the parasocial contact hypothesis literature explores the prejudice reduction made possible by parasocial relationships with television characters, yet the growing popularity of social media presents another medium through which parasocial relationships may be formed. If positive parasocial contact hypothesis effects may be observed when individuals form relationships with characters in other media, so too should these effects be observed when individuals have parasocial relationships with outgroup influencers <span class="citation" data-cites="banasetal_2020_metaanalysis">(<a href="#ref-banasetal_2020_metaanalysis" role="doc-biblioref">Banas et al., 2020</a>)</span>. Thus, I pose my third hypothesis: the relationship between the amount of time that children spend on YouTube and their racial stereotyping and prejudice will be moderated by whether they have a parasocial relationship with a favorite YouTuber of a race other than their own. Specifically, if children have a favorite YouTuber of a race other than their own and they have a parasocial relationship with this YouTuber, they will display less racial stereotyping and prejudice.</p>
</section>
</section>
<section id="sec-methods" class="level2">
<h2 data-anchor-id="sec-methods">Methods</h2>
<section id="sec-participants-and-procedures" class="level3">
<h3 data-anchor-id="sec-participants-and-procedures">Participants and Procedures</h3>
<p>This study will include children between the ages of 8 and 13. Though children may express negative racial attitudes prior to this point in development, during early adolescence, children develop the ability to recognize and reflect on the racial patterns and dynamics present in their environments (Hughes &amp; Watford, 2022). As such, this age range should allow me to observe how the observation racial regularities present on YouTube may affect children’s stereotyping and prejudicial attitudes, and how such a phenomenon develops. Participants will be recruited through Qualtrics Panels, which will allow me to obtain a representative sample of parents and children; other studies have used Qualtrics Panels with similar methods and populations (Byrd &amp; Ahn, 2020).</p>
<p>Data will be collected during February and March of 2025 from families recruited via Qualtrics Panels. Participating families will receive two Qualtrics surveys to be completed asynchronously, and they will receive compensation (around $10-$15; the final amount will be determined by Qualtrics Panels) after both surveys have been completed. First, parents will complete a demographics and YouTube usage survey, in which they will answer questions related to parent and child demographics (child age, race/ethnicity, parent income and level of education, etc), as well as questions regarding their child’s YouTube usage (for instance, time spent on YouTube, as reported by their child’s device screen time). Then, children will complete their own survey.</p>
</section>
<section id="sec-measures" class="level3">
<h3 data-anchor-id="sec-measures">Measures</h3>
<p>First, they will answer questions related to their YouTube usage (perceptions of time spent). Next, they will either answer more questions pertaining to YouTube content, or their general racial attitudes; either block of questions will appear randomly, so as to reduce the influence of question order. In the racial attitudes section, children will answer questions regarding outgroup prejudices, as rated on a Likert scale. They will also complete one friend choice item, as a simple exploratory measure of racial preference. In the YouTube content section, children will be asked to think of their favorite YouTuber as they answer questions related to whether they have a parasocial relationship with that YouTuber, as well as their observations of racial regularities on YouTube.</p>
</section>
</section>
<section id="sec-results" class="level2">
<h2 data-anchor-id="sec-results">Results</h2>
<p>Below is a simple regression displaying the relationship between time spent on YouTube and a child’s racial attitudes. Despite a visual upward trend, this relationship is not statistically significant: <span class="math inline">F</span>(1, 15) = 1.15, <span class="math inline">p</span> = = .300, <span class="math inline">R^2</span> = 0.07.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption>Simple Correlation Between Time Spent on YouTube and Racial Attitudes score</figcaption>
<p><img src="manuscript_files/figure-html/regression-plot-1.svg" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-banasetal_2020_metaanalysis" class="csl-entry" role="listitem">
Banas, J. A., Bessarabova, E., &amp; Massey, Z. B. (2020). Meta-<span>Analysis</span> on <span>Mediated Contact</span> and <span>Prejudice</span>. <em>Human Communication Research</em>, <em>46</em>(2-3), 120–160. <a href="https://doi.org/10.1093/hcr/hqaa004">https://doi.org/10.1093/hcr/hqaa004</a>
</div>
<div id="ref-guoharlow_2014_usergenerated" class="csl-entry" role="listitem">
Guo, L., &amp; Harlow, S. (2014). User-<span>Generated Racism</span>: <span>An Analysis</span> of <span>Stereotypes</span> of <span>African Americans</span>, <span>Latinos</span>, and <span>Asians</span> in <span>YouTube Videos</span>. <em>Howard Journal of Communications</em>, <em>25</em>(3), 281–302. <a href="https://doi.org/10.1080/10646175.2014.925413">https://doi.org/10.1080/10646175.2014.925413</a>
</div>
<div id="ref-hugheswatford_2022_racial" class="csl-entry" role="listitem">
Hughes, D. L., &amp; Watford, J. A. (2022). Racial regularities: <span>Setting</span>-level dynamics as a source of ethnic-racial socialization. <em>American Journal of Community Psychology</em>, <em>70</em>(1-2), 3–17. <a href="https://doi.org/10.1002/ajcp.12565">https://doi.org/10.1002/ajcp.12565</a>
</div>
<div id="ref-hughesetal_2023_growing" class="csl-entry" role="listitem">
Hughes, D., Cox, B., &amp; Das, S. (2023). Growing <span>Up</span>, <span>Learning Race</span>: <span>An Integration</span> of <span>Research</span> on <span>Cognitive Mechanisms</span> and <span>Socialization</span> in <span>Context</span>. <em>Annual Review of Developmental Psychology</em>, <em>5</em>(1), 137–167. <a href="https://doi.org/10.1146/annurev-devpsych-120321-015718">https://doi.org/10.1146/annurev-devpsych-120321-015718</a>
</div>
<div id="ref-payneetal_2017_bias" class="csl-entry" role="listitem">
Payne, B. K., Vuletich, H. A., &amp; Lundberg, K. B. (2017). The <span>Bias</span> of <span>Crowds</span>: <span>How Implicit Bias Bridges Personal</span> and <span>Systemic Prejudice</span>. <em>Psychological Inquiry</em>, <em>28</em>(4), 233–248. <a href="https://doi.org/10.1080/1047840X.2017.1335568">https://doi.org/10.1080/1047840X.2017.1335568</a>
</div>
<div id="ref-rizzoetal_2022_beliefs" class="csl-entry" role="listitem">
Rizzo, M. T., Green, E. R., Dunham, Y., Bruneau, E., &amp; Rhodes, M. (2022). Beliefs about social norms and racial inequalities predict variation in the early development of racial bias. <em>Developmental Science</em>, <em>25</em>(2), e13170. <a href="https://doi.org/10.1111/desc.13170">https://doi.org/10.1111/desc.13170</a>
</div>
<div id="ref-rollinsetal_2022_who" class="csl-entry" role="listitem">
Rollins, D., Bridgewater, E., Munzer, T., Weeks, H. M., Schaller, A., Yancich, M., Gipson, W., Drogos, K., Robb, M. B., &amp; Radesky, J. S. (2022). <em>Who <span>Is</span> the <span>“<span>You</span>”</span> in <span>YouTube</span>? <span>Missed Opportunities</span> in <span>Race</span> and <span>Representation</span> in <span>Children</span>’s <span>YouTube Videos</span></em>. Common Sense Media.
</div>
<div id="ref-schiappaetal_2005_parasocial" class="csl-entry" role="listitem">
Schiappa, E., Gregg, P. B., &amp; Hewes, D. E. (2005). The <span>Parasocial Contact Hypothesis</span>. <em>Communication Monographs</em>, <em>72</em>(1), 92–115. <a href="https://doi.org/10.1080/0363775052000342544">https://doi.org/10.1080/0363775052000342544</a>
</div>
<div id="ref-smithetal_2018_many" class="csl-entry" role="listitem">
Smith, A., Toor, S., &amp; van Kessel, P. (2018). Many <span>Turn</span> to <span>YouTube</span> for <span>Children</span>’s <span>Content</span>, <span>News</span>, <span>How-To Lessons</span>. <em>Pew Research Center</em>.
</div>
<div id="ref-wardbridgewater_2023_media" class="csl-entry" role="listitem">
Ward, L. M., &amp; Bridgewater, E. (2023). Media use and the development of racial attitudes among <span>U</span>.<span>S</span>. youth. <em>Child Development Perspectives</em>, <em>17</em>(2), 83–89. <a href="https://doi.org/10.1111/cdep.12480">https://doi.org/10.1111/cdep.12480</a>
</div>
<div id="ref-wongetal_2022_theorizing" class="csl-entry" role="listitem">
Wong, N. C. H., Massey, Z. B., Barbarti, J. L., Bessarabova, E., &amp; Banas, J. A. (2022). Theorizing <span>Prejudice Reduction</span> via <span>Mediated Intergroup Contact</span>: <span>Extending</span> the <span>Intergroup Contact Theory</span> to <span>Media Contexts</span>. <em>Journal of Media Psychology</em>, <em>34</em>(2), 89–100. <a href="https://doi.org/10.1027/1864-1105/a000338">https://doi.org/10.1027/1864-1105/a000338</a>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>